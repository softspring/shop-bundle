{% extends '@SfsShop/layout.html.twig' %}

{% block content %}

    {% if cart.entries.count == 0 %}
        The cart is empty
    {% else %}
        {{ form_start(form) }}
        <table class="table">
            <thead>
            <tr>
                <th>Item</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Total</th>
            </tr>
            </thead>

            <tbody>
            {% for entry in cart.entries %}
                <tr>
                    <td>{{ entry.item.name }}</td>
                    <td>{{ entry.item.price }}</td>
                    <td>
                        {{ form_widget(form.entries[loop.index0].quantity, {'attr':{'onchange':'submit()'}}) }}
                    </td>
                    <td>{{ entry.totalPrice }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {{ form_rest(form) }}
        <input type="submit" value="Update cart" class="btn btn-primary" />
        {{ form_end(form) }}
        {% for transition in workflow_transitions(cart, 'checkout') %}
            <a class="btn btn-primary" href="{{ url('sfs_shop_cart_transition', {'transition':transition.name}) }}">{{ transition.name }}</a>
            <br/>
        {% else %}
            No actions available.
        {% endfor %}

    {% endif %}
{% endblock content %}